Networking & Connectivity
Public Endpoint via Reverse Proxy: Because the bot is in a private VNet, you must provide a public HTTPS endpoint for Teams to reach it . The recommended approach is to deploy a reverse proxy service in front of the bot:
•	Use Azure Application Gateway (with WAF) or Azure API Management (APIM) in external mode (with a public IP)   . These will sit at the edge of your VNet.
o	Application Gateway: Configure it with an HTTP(S) listener on port 443 and a backend pool pointing to your bot’s private App Service (by its private IP or hostname). Terminate SSL at the gateway with a custom domain certificate (e.g., for bot.yourcompany.com) . The gateway will forward requests to the bot’s internal endpoint.
o	APIM: Alternatively, put Azure API Management in External VNet mode (which gives APIM a public endpoint while still being able to reach internal services) . Publish an API endpoint (e.g., /api/messages) on APIM that routes to the bot’s App Service. APIM can also manage rate limits or headers if needed.
•	Either choice should deliver a public DNS name for your bot. For example, an Application Gateway in front of your bot could be accessed at bot.yourcompany.com (after you configure a DNS record and assign a cert). This URL (https://bot.yourcompany.com/api/messages) is what you’d use as the bot’s messaging endpoint in Azure Bot Service config .
Why not direct VNet integration? Teams (and the Bot Framework Service) cannot call directly into a private IP – they require a publicly reachable URL   . Thus, private bots must be surfaced via a public interface. The reverse proxy provides a controlled, secure entry point without exposing the bot’s host directly. (If extremely high security is needed, one approach is to only expose the specific /api/messages path through the proxy and lock down other paths, perhaps even requiring mutual TLS or a specific Auth header for Bot Framework to accept   .) Microsoft’s guidance is clear: Teams bots won’t work if the bot is entirely isolated in a VNet with no public ingress   .
Network Security Configuration: Lock down network access so the bot is accessible only to the necessary services:
•	NSG/Firewall Rules: If using an Application Gateway, ensure the subnet NSG allows inbound HTTPS (443) on the gateway’s public IP. For the bot’s subnet, allow inbound from the proxy (since the gateway/APIM will call the bot on a private address) and allow outbound 443 from the bot to required services (Bot Service, AAD, etc.).
•	Limit Egress by Domain/IP: The bot will call out to Azure Bot Service (for OAuth token retrieval, etc.) and Teams service will call in. Allow outbound traffic on port 443 to *.botframework.com (covers Azure Bot Service endpoints) and to Teams URLs. Since Teams traffic comes via Bot Service, the primary outbound requirement is Bot Framework, but if needed include Teams domains (*.teams.microsoft.com, *.skype.com) for completeness . Using Azure Service Tags is ideal here – e.g., use the Service Tag AzureBotService in NSGs to allow all Azure Bot Service connector traffic , and consider Microsoft 365 service tags or IP ranges for Teams if restricting egress tightly. Microsoft documentation suggests allowing the Teams IP ranges (from the official Office 365 IP list) if you are filtering traffic . (For example, ranges like 52.112.0.0/14 are used by Teams servers.)
•	Bot to AAD: Ensure the bot can reach Azure AD endpoints (for token validation, typically this is also over HTTPS to login.microsoftonline.com or login.microsoft.com). These are generally not blocked by default outbound, but important to note in restricted environments.
DNS: If your bot’s App Service is in a VNet with private DNS, ensure that the custom domain (e.g., bot.yourcompany.com) is resolvable internally to the Application Gateway’s front-end IP. The Bot Framework service itself will use public DNS to reach the gateway. In summary, configure public DNS for the custom domain to point to the gateway’s public IP, and internal DNS (if needed) so that the App Service can call itself or other services correctly.

Summary of Ports, Domains, and IP Requirements
To finalize, ensure the network allows the necessary traffic for the bot’s operation:
•	Outbound to Azure Bot Service: HTTPS port 443 outbound from the bot’s host (App Service) to Azure Bot Service domains (especially *.botframework.com) . This is used for communicating with the Bot Framework Service (for message delivery and token exchange). If using network security groups or firewall, you can leverage the AzureBotService service tag to allow this traffic , which abstracts the actual IP ranges.
•	Outbound to Azure AD: HTTPS 443 to Azure AD (login.microsoftonline.com and related endpoints) is required for token validation and OAuth flows. This is usually open by default, but include it if you have restrictive egress rules.
•	Inbound from Teams (via Bot Service): The reverse proxy (Application Gateway or APIM) must accept HTTPS 443 inbound from Microsoft Teams cloud services. Practically, this means allowing traffic from the Bot Framework Service and Teams service. These originate from dynamic Azure datacenter ranges. If using Application Gateway, it’s already designed to accept 443 from anywhere – you might rely on the bot’s authentication (JWT tokens from Bot Service) to ensure only legitimate calls get through. If you choose to restrict by source IP, use Microsoft’s published Teams IP ranges  (part of Office 365 IP list) to allow Teams service network egress. For instance, allow Azure regions or address ranges documented for Teams and the Bot Connector. (However, maintaining these IP rules is cumbersome – using the Azure service tags as mentioned is simpler and typically sufficient to ensure security, as unauthorized callers cannot successfully authenticate to the bot anyway.)
•	General: All communication uses TLS. No special ports besides 443 are needed for the bot-to-Teams/BotService path. If your bot calls other services (e.g., a database in the VNet, or an API), make sure those ports are allowed internally but no new inbound exposure is required for those – the bot will initiate those connections from inside the VNet.

